[{"C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\index.js":"1","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\App.js":"2","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\components\\header.jsx":"3","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\main.jsx":"4","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\workers.jsx":"5","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\clients.jsx":"6","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\add-category.jsx":"7","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\hooks\\http.hook.js":"8","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\add-prod.jsx":"9","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\utils\\innercontext.jsx":"10","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\products.jsx":"11","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\categories.jsx":"12","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\login.jsx":"13","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\register.jsx":"14","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\add-worker.jsx":"15","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\change-user.jsx":"16","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\hooks\\auth.hook.js":"17","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\change-product.jsx":"18"},{"size":374,"mtime":1608476735198,"results":"19","hashOfConfig":"20"},{"size":1670,"mtime":1608482969346,"results":"21","hashOfConfig":"20"},{"size":2355,"mtime":1608476735174,"results":"22","hashOfConfig":"20"},{"size":3694,"mtime":1608487438067,"results":"23","hashOfConfig":"20"},{"size":1129,"mtime":1608487438091,"results":"24","hashOfConfig":"20"},{"size":1675,"mtime":1608487350098,"results":"25","hashOfConfig":"20"},{"size":1224,"mtime":1608399969936,"results":"26","hashOfConfig":"20"},{"size":849,"mtime":1608399969926,"results":"27","hashOfConfig":"20"},{"size":2936,"mtime":1608482969397,"results":"28","hashOfConfig":"20"},{"size":782,"mtime":1608482969589,"results":"29","hashOfConfig":"20"},{"size":1151,"mtime":1608487438073,"results":"30","hashOfConfig":"20"},{"size":1304,"mtime":1608487438058,"results":"31","hashOfConfig":"20"},{"size":1725,"mtime":1608476735254,"results":"32","hashOfConfig":"20"},{"size":2726,"mtime":1608476735270,"results":"33","hashOfConfig":"20"},{"size":2940,"mtime":1608482969421,"results":"34","hashOfConfig":"20"},{"size":1927,"mtime":1608482969487,"results":"35","hashOfConfig":"20"},{"size":709,"mtime":1608482969366,"results":"36","hashOfConfig":"20"},{"size":3662,"mtime":1608482969467,"results":"37","hashOfConfig":"20"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},"l70pd4",{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"40"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"48","messages":"49","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"50","usedDeprecatedRules":"40"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"40"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"66","usedDeprecatedRules":"40"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"69","usedDeprecatedRules":"40"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"76","usedDeprecatedRules":"40"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"79","usedDeprecatedRules":"40"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"82","usedDeprecatedRules":"40"},"C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\index.js",[],["83","84"],"C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\App.js",[],"C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\components\\header.jsx",["85","86"],"import React, { useCallback, useEffect, useState } from 'react'\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\nimport { useAuth } from '../hooks/auth.hook';\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { useAppState } from '../utils/innercontext';\r\n\r\nexport const Header = () => {\r\n\r\n\tconst [navContent, setNavContent] = useState()\r\n\tconst {request} = useHttp()\r\n\tconst history = useHistory()\r\n\tconst location = useLocation()\r\n\tconst { state } = useAppState()\r\n\tconst { logout } = useAuth()\r\n\r\n\tuseEffect(() =>{\r\n\t\tgetType()\r\n\t}, [state.token])\r\n\r\n\tconst getType = async ()=>{\r\n\t\tif(state.token !== null){\r\n\t\t\tconst response = await request(`/auth/check`, 'GET', null, { 'Authorization': 'Bearer ' + state.token })\r\n\t\t\tif(response.type === 'admin'){\r\n\t\t\t\tsetNavContent(\r\n\t\t\t\t\t<ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\r\n\t\t\t\t\t\t<li><Link to='/admin/products'>Продукты</Link></li>\r\n\t\t\t\t\t\t<li><Link to='/admin/categories'>Категории</Link></li>\r\n\t\t\t\t\t\t<li><Link to='/admin/workers'>Рабочие</Link></li>\r\n\t\t\t\t\t\t<li><Link to='/admin/users'>Пользователи</Link></li>\r\n\t\t\t\t\t\t<li><Link to='/' onClick={e=>logout()}>Выйти</Link></li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t)\r\n\t\t\t} else if(response.type === 'manager'){\r\n\t\t\t\tsetNavContent(\r\n\t\t\t\t\t<ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\r\n\t\t\t\t\t\t<li><Link to='/admin/products'>Продукты</Link></li>\r\n\t\t\t\t\t\t<li><Link to='/admin/categories'>Категории</Link></li>\r\n\t\t\t\t\t\t<li><Link to='/' onClick={e=>logout()}>Выйти</Link></li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t)\r\n\t\t\t} else if(response.type === 'client'){\r\n\t\t\t\tsetNavContent(\r\n\t\t\t\t\t<ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\r\n\t\t\t\t\t\t<li><Link to='/' onClick={e=>logout()}>Выйти</Link></li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t} else{\r\n\t\t\tsetNavContent(\r\n\t\t\t\t<ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\r\n\t\t\t\t\t<li><Link to='/login'>Войти</Link></li>\r\n\t\t\t\t\t<li><Link to='/register'>Зарегестрироваться</Link></li>\r\n\t\t\t\t</ul>\r\n\t\t\t)\r\n\t\t\tif(location.pathname !== '/'){\r\n\t\t\t\thistory.push('/')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<nav className='teal darken-3'>\r\n\t\t\t<div style={{ padding: '0 50px' }} className=\"nav-wrapper\">\r\n\t\t\t\t<Link to='/' className=\"brand-logo\">PostgreSQL</Link>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnavContent\r\n\t\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t)\r\n}","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\main.jsx",["87"],"C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\workers.jsx",["88","89","90","91"],"import React, { useEffect, useState } from 'react'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { useAppState } from '../utils/innercontext'\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport const Workers = () => {\r\n\r\n\tconst [workers, setWorkers] = useState([])\r\n\tconst {request, loading} = useHttp()\r\n\tconst {state, dispatch} = useAppState()\r\n\t\r\n\tuseEffect(async () => {\r\n\t\tconst response = await request('/api/workers', 'GET', null, { 'Authorization': 'Bearer ' + state.token })\r\n\t\tsetWorkers(response)\r\n\t}, [])\r\n\r\n\treturn workers ? (\r\n\t\t<div className='main' >\r\n\t\t\t<div className='main-wrapper'>\r\n\t\t\t\t<div className='main-title'>Рабочие</div>\r\n\r\n\t\t\t\t\t<ul className=\"collection\">\r\n\t\t\t\t\t\t<li><Link to='/admin/add-worker'>Добавить рабочего</Link></li>\r\n\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t<ul style={{marginTop: '10px'}} className=\"collection\">\r\n\t\t\t\t\t\t{workers.map((item, id) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<li key={id} className=\"collection-item\">{item.name}</li>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t) : (null)\r\n}","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\clients.jsx",["92","93","94","95"],"C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\add-category.jsx",[],"C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\hooks\\http.hook.js",[],"C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\add-prod.jsx",[],"C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\utils\\innercontext.jsx",[],"C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\products.jsx",["96","97"],"import React, { useState, useEffect, useCallback } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { useAppState } from '../utils/innercontext'\r\n\r\nexport const Products = () => {\r\n\tconst [products, setProducts] = useState([])\r\n\tconst { request, loading } = useHttp()\r\n\t\r\n\tconst getAllProds = useCallback(async () => {\r\n\t\ttry {\r\n\t\t\tlet prods = await request(`/api/products`, 'GET', null)\r\n\t\t\tsetProducts(prods)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('PRODUCTS',error.message)\r\n\t\t}\r\n\t}, [request])\r\n\r\n\tuseEffect(() => {\r\n\t\tgetAllProds()\r\n\t}, [])\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h3>Продукты</h3>\r\n\t\t\t<ul style={{marginTop: '10px'}} className=\"collection\">\r\n\t\t\t\t{products.map((item, id) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<li key={id} className=\"collection-item\">\r\n\t\t\t\t\t\t\t<Link to={{\r\n\t\t\t\t\t\t\t\tpathname: `/admin/change-product/${item.id}`,\r\n\t\t\t\t\t\t\t\tstate: {\r\n\t\t\t\t\t\t\t\t\tid: item.id\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}>{item.name}</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t)\r\n}","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\categories.jsx",["98","99"],"import React, { useState, useEffect, useCallback } from 'react'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { useAppState } from '../utils/innercontext'\r\n\r\nexport const Products = () => {\r\n\tconst [products, setProducts] = useState([])\r\n\tconst { request, loading } = useHttp()\r\n\t\r\n\tconst getAllProds = useCallback(async () => {\r\n\t\ttry {\r\n\t\t\tlet prods = await request(`/api/products`, 'GET', null)\r\n\t\t\tsetProducts(prods)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error.message)\r\n\t\t}\r\n\t}, [request])\r\n\r\n\tuseEffect(() => {\r\n\t\tgetAllProds()\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t!loading ?\r\n\t\t<div>\r\n\t\t\t{products.map((item, id) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={id} >\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{item.product_title}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\tКатегория: {item.category_title}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\tЦена: {item.price} RUB\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t})}\r\n\t\t</div> :\r\n\t\t<div>Загрузка...</div>\r\n\t)\r\n}","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\login.jsx",["100"],"import React, { useState } from 'react'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { useAppState } from '../utils/innercontext';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useAuth } from '../hooks/auth.hook';\r\n\r\nexport const Login = () => {\r\n\tconst [form, setForm] = useState({ phone: \"\", password: \"\" })\r\n\tconst {request, loading} = useHttp()\r\n\tconst history = useHistory()\r\n\tconst {login} = useAuth()\r\n\r\n\tconst changeHadler = event => {\r\n\t\tsetForm({ ...form, [event.target.name]: event.target.value })\r\n\t}\r\n\r\n\tconst loginHandler = async (e) => {\r\n\t\te.preventDefault()\r\n\t\ttry{\r\n\t\t\tconst response = await request(`/auth/login`, 'POST', { phone: form.phone, password: form.password })\r\n\t\t\tlogin(response.token)\r\n\t\t\thistory.push('/')\r\n\t\t} catch(e){\r\n\t\t\twindow.M.toast({ html: e })\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='container'>\r\n\t\t\t<div className='center-align' style={{ paddingTop: '20px', fontSize: '30px' }}>\r\n\t\t\t\tВойти\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"input-field col s12\">\r\n\t\t\t\t<input onChange={changeHadler} value={form.title} id=\"phone\" name='phone' type=\"text\" className=\"validate\" />\r\n\t\t\t\t<label htmlFor=\"phone\">Телефон</label>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"input-field col s12\">\r\n\t\t\t\t<input onChange={changeHadler} value={form.price} id=\"password\" name='password' type=\"text\" className=\"validate\" />\r\n\t\t\t\t<label htmlFor=\"password\">Пароль</label>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='center-align' style={{ paddingTop: '20px' }}>\r\n\t\t\t\t<button onClick={e => loginHandler(e)} className={`waves-effect waves-light btn-large teal darken-3${loading || form.phone.length < 14 || form.password.length < 5 ? ' disabled' : ''}`}>Войти</button>\r\n\t\t\t</div>\r\n\r\n\r\n\t\t</div>\r\n\t)\r\n}","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\register.jsx",[],"C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\add-worker.jsx",[],"C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\change-user.jsx",["101","102","103"],"import React, { useState, useEffect, useCallback } from 'react'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { useAppState } from '../utils/innercontext'\r\n\r\nexport const ChangeUser = (props) => {\r\n\tconst id = props.location.state.id\r\n\tconst [user, setUser] = useState({name: \"\", surname: \"\", phone: \"\", mail: \"\", type: \"\"})\r\n\tconst { request } = useHttp()\r\n\tconst {state, dispatch} = useAppState()\r\n\r\n\tconst changeHadler = event => {\r\n\t\tsetUser({...user, type: event.target.value})\r\n\t}\r\n\r\n\tconst getUser = useCallback(async () => {\r\n\t\ttry {\r\n\t\t\tlet testuser = await request(`/api/users/${id}`, 'GET', null, { 'Authorization': 'Bearer ' + state.token })\r\n\t\t\tsetUser(testuser[0])\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('CHANGE_USER', e)\r\n\t\t}\r\n\t}, [request])\r\n\r\n\tconst sendReqHandler = async () => {\r\n\t\ttry {\r\n\t\t\tawait request(`/api/users/${id}`, 'PATCH', { type: user.type }, { 'Authorization': 'Bearer ' + state.token }).catch(err => console.log(err))\r\n\t\t\twindow.M.toast({ html: `Тип изменён` })\r\n\t\t\t// setTimeout(()=> window.location.replace(\"http://localhost:3000/\"), 800)\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('CHANGE_USER 2', e);\r\n\t  }\r\n\t}\r\n\r\n\tuseEffect(()=>{\r\n\t\tgetUser()\r\n\t}, [])\r\n\r\n\treturn user ? (\r\n\t\t<div className='container'>\r\n\t\t\t<div className='center-align' style={{ paddingTop: '20px', fontSize: '30px' }}>\r\n\t\t\t\tИзменить тип пользователя\r\n\t\t\t</div>\r\n\r\n\t\t\t<h4>{user.name}</h4>\r\n\t\t\t<h4>{user.surname}</h4>\r\n\t\t\t<h4>{user.phone}</h4>\r\n\t\t\t<h4>{user.mail}</h4>\r\n\t\t\t<h4>{user.company}</h4>\r\n\r\n\t\t\t<div className=\"input-field col s12\">\r\n\t\t\t\t<input onChange={changeHadler} value={user.type} id=\"type\" name='type' type=\"text\" className=\"validate\" />\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='center-align' style={{ paddingTop: '20px' }}>\r\n\t\t\t\t<button onClick={sendReqHandler} className={`waves-effect waves-light btn-large teal darken-3`}>Изменить</button>\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\t) : (null)\r\n}","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\hooks\\auth.hook.js",["104","105","106","107"],"import { useState, useCallback, useEffect } from 'react'\r\nimport { useAppState } from '../utils/innercontext'\r\n\r\nconst storageName = 'token'\r\n\r\nexport const useAuth = () => {\r\n\r\n\tconst {state, dispatch} = useAppState()\r\n\r\n\tconst login = useCallback((jwtToken) => {\r\n\t\tdispatch({type: \"SET_TOKEN\", payload: jwtToken})\r\n\t\tlocalStorage.setItem(storageName, JSON.stringify({token: jwtToken}))\r\n\t}, [])\r\n\r\n\tconst logout = useCallback(() => {\r\n\t\tdispatch({type: \"LOGOUT\"})\r\n\t\tlocalStorage.removeItem(storageName)\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tconst data = JSON.parse(localStorage.getItem(storageName))\r\n\t\tif (data && data.token) {\r\n\t\t\tlogin(data.token)\r\n\t\t}\r\n\r\n\t}, [login])\r\n\r\n\r\n\treturn { login, logout }\r\n}","C:\\Users\\vgvsshi\\Desktop\\proj\\postgre_coursework\\client\\src\\pages\\change-product.jsx",["108","109","110","111","112","113","114"],"import React, { useState, useEffect, useCallback } from 'react'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { useAppState } from '../utils/innercontext'\r\n\r\nexport const ChangeProduct = ({match}) => {\r\n\r\n\twindow.M.Dropdown.init(document.querySelectorAll('.dropdown-trigger'))\r\n\r\n\tconst id = match.params.handle\r\n\tconst [categories, setCategory] = useState(null)\r\n\tconst [product, setProduct] = useState({id: \"\", name: \"\", price: \"\", category_id: \"\", quantity: \"\"})\r\n\tconst { request, loading, error, clearError } = useHttp()\r\n\tconst { state } = useAppState()\r\n\r\n\tconst changeHadler = event => {\r\n\t\tlet parsed = event.target.value\r\n\t\tif(!isNaN(parsed) && parsed.length != 0){\r\n\t\t\tparsed = parseInt(parsed)\r\n\t\t}\r\n\t\tsetProduct({ ...product, [event.target.name]: parsed })\r\n\t}\r\n\r\n\tconst getProduct = useCallback(async () => {\r\n\t\ttry {\r\n\t\t\tlet test = await request(`/api/products/${id}`, 'GET', null, { 'Authorization': 'Bearer ' + state.token })\r\n\t\t\tsetProduct(test.rows[0])\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('CHANGE_PRODUCT 1', e)\r\n\t\t}\r\n\t}, [request])\r\n\r\n\tconst sendReqHandler = async (e) => {\r\n\t\ttry {\r\n\t\t\tawait request(`/api/products/${id}`, 'PATCH', product, { 'Authorization': 'Bearer ' + state.token }).catch(err => console.log(err))\r\n\t\t\twindow.M.toast({ html: `Продукт изменён` })\r\n\t\t\tsetTimeout(()=> window.location.replace(\"http://localhost:3000/admin/products\"), 800)\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('CHANGE_PRODUCT 2', e);\r\n\t  }\r\n\t}\r\n\t\r\n\tconst getAllCategories = useCallback(async () => {\r\n\t\ttry {\r\n\t\t\tlet allCategories = await request('/api/categories', 'GET', null, { 'Authorization': 'Bearer ' + state.token })\r\n\t\t\tsetCategory(allCategories)\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('CHANGE_PRODUCT 3', e)\r\n\t\t}\r\n\t}, [request])\r\n\r\n\tuseEffect(()=>{\r\n\t\tgetAllCategories()\r\n\t}, [])\r\n\r\n\tuseEffect(()=>{\r\n\t\tconsole.log(product)\r\n\t}, [product])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(!categories){\r\n\t\t\tgetProduct()\r\n\t\t}\r\n\t}, [categories])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (error) {\r\n\t\t\twindow.M.toast({ html: `${error}` })\r\n\t\t\tclearError()\r\n\t\t}\r\n\t}, [error, clearError])\r\n\r\n\treturn (\r\n\t\tproduct && categories ?\r\n\t\t<div className='container'>\r\n\t\t\t<div className='center-align' style={{ paddingTop: '20px', fontSize: '30px' }}>\r\n\t\t\t\tИзменения товара\r\n\t\t\t</div>\r\n\t\t\t<div className=\"input-field col s12\">\r\n\t\t\t\t<h5>Название</h5>\r\n\t\t\t\t<input onChange={changeHadler} value={product.name} id=\"name\" name='name' type=\"text\" className=\"validate\" />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"input-field col s12\">\r\n\t\t\t\t<h5>Цена</h5>\r\n\t\t\t\t<input onChange={changeHadler} value={product.price} id=\"price\" name='price' type=\"text\" className=\"validate\" />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"input-field col s12\">\r\n\t\t\t\t<h5>Количество</h5>\r\n\t\t\t\t<input onChange={changeHadler} value={product.quantity} id=\"quantity\" name='quantity' type=\"text\" className=\"validate\" />\r\n\t\t\t</div>\r\n\t\t\t<button className='dropdown-trigger btn teal darken-3' style={{ minWidth: '200px' }} data-target='dropdown1'>{product.category_id.length !== 0 ? categories.find(el => el.id == product.category_id).name : 'Выберите категорию'}</button>\r\n\t\t\t<ul id='dropdown1' className='dropdown-content'>\r\n\t\t\t\t{\r\n\t\t\t\t\tcategories.map((item, id) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<li onClick={() => { setProduct({ ...product, category_id: item.id }) }} key={id}><a href=\"#!\">{item.name}</a></li>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</ul>\r\n\t\t\t<div className='center-align' style={{ paddingTop: '20px' }}>\r\n\t\t\t\t<button onClick={sendReqHandler} className={`waves-effect waves-light btn-large teal darken-3`}>Применить изменения</button>\r\n\t\t\t</div>\r\n\t\t</div> : (null)\r\n\t)\r\n}",{"ruleId":"115","replacedBy":"116"},{"ruleId":"117","replacedBy":"118"},{"ruleId":"119","severity":1,"message":"120","line":1,"column":17,"nodeType":"121","messageId":"122","endLine":1,"endColumn":28},{"ruleId":"123","severity":1,"message":"124","line":18,"column":5,"nodeType":"125","endLine":18,"endColumn":18,"suggestions":"126"},{"ruleId":"123","severity":1,"message":"127","line":25,"column":5,"nodeType":"125","endLine":25,"endColumn":7,"suggestions":"128"},{"ruleId":"119","severity":1,"message":"129","line":9,"column":18,"nodeType":"121","messageId":"122","endLine":9,"endColumn":25},{"ruleId":"119","severity":1,"message":"130","line":10,"column":16,"nodeType":"121","messageId":"122","endLine":10,"endColumn":24},{"ruleId":"123","severity":1,"message":"131","line":12,"column":12,"nodeType":"132","endLine":15,"endColumn":3},{"ruleId":"123","severity":1,"message":"133","line":15,"column":5,"nodeType":"125","endLine":15,"endColumn":7,"suggestions":"134"},{"ruleId":"119","severity":1,"message":"135","line":5,"column":10,"nodeType":"121","messageId":"122","endLine":5,"endColumn":17},{"ruleId":"119","severity":1,"message":"130","line":11,"column":17,"nodeType":"121","messageId":"122","endLine":11,"endColumn":25},{"ruleId":"123","severity":1,"message":"131","line":13,"column":12,"nodeType":"132","endLine":18,"endColumn":3},{"ruleId":"123","severity":1,"message":"136","line":18,"column":5,"nodeType":"125","endLine":18,"endColumn":18,"suggestions":"137"},{"ruleId":"119","severity":1,"message":"138","line":3,"column":10,"nodeType":"121","messageId":"122","endLine":3,"endColumn":21},{"ruleId":"123","severity":1,"message":"127","line":20,"column":5,"nodeType":"125","endLine":20,"endColumn":7,"suggestions":"139"},{"ruleId":"119","severity":1,"message":"138","line":3,"column":10,"nodeType":"121","messageId":"122","endLine":3,"endColumn":21},{"ruleId":"123","severity":1,"message":"127","line":20,"column":5,"nodeType":"125","endLine":20,"endColumn":7,"suggestions":"140"},{"ruleId":"119","severity":1,"message":"138","line":3,"column":10,"nodeType":"121","messageId":"122","endLine":3,"endColumn":21},{"ruleId":"119","severity":1,"message":"130","line":9,"column":16,"nodeType":"121","messageId":"122","endLine":9,"endColumn":24},{"ruleId":"123","severity":1,"message":"141","line":22,"column":5,"nodeType":"125","endLine":22,"endColumn":14,"suggestions":"142"},{"ruleId":"123","severity":1,"message":"143","line":36,"column":5,"nodeType":"125","endLine":36,"endColumn":7,"suggestions":"144"},{"ruleId":"119","severity":1,"message":"145","line":1,"column":10,"nodeType":"121","messageId":"122","endLine":1,"endColumn":18},{"ruleId":"119","severity":1,"message":"146","line":8,"column":9,"nodeType":"121","messageId":"122","endLine":8,"endColumn":14},{"ruleId":"123","severity":1,"message":"147","line":14,"column":5,"nodeType":"125","endLine":14,"endColumn":7,"suggestions":"148"},{"ruleId":"123","severity":1,"message":"147","line":19,"column":5,"nodeType":"125","endLine":19,"endColumn":7,"suggestions":"149"},{"ruleId":"119","severity":1,"message":"129","line":12,"column":19,"nodeType":"121","messageId":"122","endLine":12,"endColumn":26},{"ruleId":"150","severity":1,"message":"151","line":17,"column":38,"nodeType":"152","messageId":"153","endLine":17,"endColumn":40},{"ruleId":"123","severity":1,"message":"141","line":30,"column":5,"nodeType":"125","endLine":30,"endColumn":14,"suggestions":"154"},{"ruleId":"123","severity":1,"message":"155","line":49,"column":5,"nodeType":"125","endLine":49,"endColumn":14,"suggestions":"156"},{"ruleId":"123","severity":1,"message":"157","line":53,"column":5,"nodeType":"125","endLine":53,"endColumn":7,"suggestions":"158"},{"ruleId":"123","severity":1,"message":"159","line":63,"column":5,"nodeType":"125","endLine":63,"endColumn":17,"suggestions":"160"},{"ruleId":"150","severity":1,"message":"161","line":90,"column":177,"nodeType":"152","messageId":"153","endLine":90,"endColumn":179},"no-native-reassign",["162"],"no-negated-in-lhs",["163"],"no-unused-vars","'useCallback' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getType'. Either include it or remove the dependency array.","ArrayExpression",["164"],"React Hook useEffect has a missing dependency: 'getAllProds'. Either include it or remove the dependency array.",["165"],"'loading' is assigned a value but never used.","'dispatch' is assigned a value but never used.","Effect callbacks are synchronous to prevent race conditions. Put the async function inside:\n\nuseEffect(() => {\n  async function fetchData() {\n    // You can await here\n    const response = await MyAPI.getData(someId);\n    // ...\n  }\n  fetchData();\n}, [someId]); // Or [] if effect doesn't need props or state\n\nLearn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching","ArrowFunctionExpression","React Hook useEffect has missing dependencies: 'request' and 'state.token'. Either include them or remove the dependency array.",["166"],"'useAuth' is defined but never used.","React Hook useEffect has a missing dependency: 'request'. Either include it or remove the dependency array.",["167"],"'useAppState' is defined but never used.",["168"],["169"],"React Hook useCallback has missing dependencies: 'id' and 'state.token'. Either include them or remove the dependency array.",["170"],"React Hook useEffect has a missing dependency: 'getUser'. Either include it or remove the dependency array.",["171"],"'useState' is defined but never used.","'state' is assigned a value but never used.","React Hook useCallback has a missing dependency: 'dispatch'. Either include it or remove the dependency array.",["172"],["173"],"eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected",["174"],"React Hook useCallback has a missing dependency: 'state.token'. Either include it or remove the dependency array.",["175"],"React Hook useEffect has a missing dependency: 'getAllCategories'. Either include it or remove the dependency array.",["176"],"React Hook useEffect has a missing dependency: 'getProduct'. Either include it or remove the dependency array.",["177"],"Expected '===' and instead saw '=='.","no-global-assign","no-unsafe-negation",{"desc":"178","fix":"179"},{"desc":"180","fix":"181"},{"desc":"182","fix":"183"},{"desc":"182","fix":"184"},{"desc":"180","fix":"185"},{"desc":"180","fix":"186"},{"desc":"187","fix":"188"},{"desc":"189","fix":"190"},{"desc":"191","fix":"192"},{"desc":"191","fix":"193"},{"desc":"187","fix":"194"},{"desc":"182","fix":"195"},{"desc":"196","fix":"197"},{"desc":"198","fix":"199"},"Update the dependencies array to be: [getType, state.token]",{"range":"200","text":"201"},"Update the dependencies array to be: [getAllProds]",{"range":"202","text":"203"},"Update the dependencies array to be: [request, state.token]",{"range":"204","text":"205"},{"range":"206","text":"205"},{"range":"207","text":"203"},{"range":"208","text":"203"},"Update the dependencies array to be: [id, request, state.token]",{"range":"209","text":"210"},"Update the dependencies array to be: [getUser]",{"range":"211","text":"212"},"Update the dependencies array to be: [dispatch]",{"range":"213","text":"214"},{"range":"215","text":"214"},{"range":"216","text":"210"},{"range":"217","text":"205"},"Update the dependencies array to be: [getAllCategories]",{"range":"218","text":"219"},"Update the dependencies array to be: [categories, getProduct]",{"range":"220","text":"221"},[560,573],"[getType, state.token]",[730,732],"[getAllProds]",[521,523],"[request, state.token]",[601,614],[546,548],[546,548],[733,742],"[id, request, state.token]",[1147,1149],"[getUser]",[421,423],"[dispatch]",[539,541],[1046,1055],[1727,1736],[1785,1787],"[getAllCategories]",[1918,1930],"[categories, getProduct]"]